{% extends "layouts/delta.html" %}
{% set pageName="User feedback form [concept]" %}
{% block content %}
<div class="panel-nav">
  <div class="controls">
    <button id="startBtn" class="govuk-button">Start</button>
    <button id="prevBtn" class="govuk-button" disabled>Previous</button>
    <button id="nextBtn" class="govuk-button" disabled>Next</button>
  </div>
</div>

<div class="panel">
  <!-- Test chart -->

    

</div>


<div class="panel xdelta-text-center">
  <h1 class="govuk-heading-xl govuk-!-margin-top-9">
    Delta user feedback form
  </h1>
  <h2 class="govuk-heading-l">Relevant, real-time insight</h2>
  <h2 class="govuk-heading-s">"In the kingdom of the blind the one-eye man is king."</h2>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h4 class="govuk-heading-s govuk-!-margin-top-3">
        Updated: 26/03/2025
      </h4>
    </div>
  </div>
</div>
<!-- The idea -->
<div class="panel">
  <h2 class="govuk-heading-l">The idea: less talking, more doing</h2>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-half">
      <ol class="govuk-list govuk-list--bullet">
        <li>We are taking a Lean approach to gathering user feedback and building a mailing list of key stakeholders.</li>
        <li>We aim to have this live within 4 weeks. After launch, we will monitor usage and make improvements based on real-world testing.</li>
        <li>We want to support continuous learning and provide a real-time, high-level customer satisfaction score.</li>        
        <li>We show a feedback request banner to users if they have not given feedback or snoozed the request in the last 3 months.</li>
        <li>Both internal and external users will be asked for feedback. We will be able to identify whether a user is internal or external.</li>
        <li>For external users, we will also identify their 'channel' (such as statistics, grants, or the funding service).</li>
        <li>Funding service-specific questions will be shown in the Orbeon form. These are outside the scope of this work.</li>
      </ol>
    </div>
    <div class="govuk-grid-column-one-half">
      <div class="govuk-notification-banner" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
        <div class="govuk-notification-banner__header">
          <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
            Tell us what you think about using Delta
          </h2>
        </div>
        <div class="govuk-notification-banner__content">
            <p class="govuk-heading-s">We're always working to improve Delta and other funding services. Your feedback helps us make them easier to use and better suited to your needs.</p>
            <p class="govuk-heading-s">The survey takes about 3 minutes to complete.</p>
            <button class="govuk-button">Take survey</button>
            <button class="govuk-button govuk-button--secondary">Snooze this message for 3 months</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Survey -->
<div class="panel" id="survey">
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h2 class="govuk-heading-l">Your experience of using Delta</h2>
      <p class="govuk-body-l">We have 4 questions for you.</p>
      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h1 class="govuk-fieldset__heading">
              1. How easy was it to use Delta?
            </h1>
          </legend>
          <div class="govuk-radios" data-module="govuk-radios">
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="howEasyToUse" name="howEasyToUse" type="radio" value="very-easy">
              <label class="govuk-label govuk-radios__label" for="howEasyToUse">
                Very easy
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="howEasyToUse-2" name="howEasyToUse" type="radio" value="easy">
              <label class="govuk-label govuk-radios__label" for="howEasyToUse-2">
                Easy
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="howEasyToUse-3" name="howEasyToUse" type="radio" value="neither">
              <label class="govuk-label govuk-radios__label" for="howEasyToUse-3">
                Neither easy nor difficult
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="howEasyToUse-4" name="howEasyToUse" type="radio" value="difficult">
              <label class="govuk-label govuk-radios__label" for="howEasyToUse-4">
                Difficult
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="howEasyToUse-4" name="howEasyToUse" type="radio" value="very-difficult">
              <label class="govuk-label govuk-radios__label" for="howEasyToUse-4">
                Very difficult
              </label>
            </div>            
          </div>
        </fieldset>
      </div>

      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h1 class="govuk-fieldset__heading">
              2. Over time, has Delta become easier or harder to use?
            </h1>
          </legend>
          <div class="govuk-radios" data-module="govuk-radios">
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="changeOverTime-4" name="changeOverTime" type="radio" value="notApplicable">
              <label class="govuk-label govuk-radios__label" for="changeOverTime-4">
                Not applicable / I have't used Delta before
              </label>
            </div>                
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="changeOverTime" name="changeOverTime" type="radio" value="easier">
              <label class="govuk-label govuk-radios__label" for="changeOverTime">
                It has become easier
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="changeOverTime-2" name="changeOverTime" type="radio" value="noChange">
              <label class="govuk-label govuk-radios__label" for="changeOverTime-2">
                No change
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="changeOverTime-3" name="changeOverTime" type="radio" value="harder">
              <label class="govuk-label govuk-radios__label" for="changeOverTime-3">
                It has become harder
              </label>
            </div>      
          </div>
        </fieldset>
      </div>      


      <div class="govuk-form-group">
        <label class="govuk-heading-m" for="whyScore">
          3. Tell us why you gave that score (optional)
        </label>
        <p class="govuk-hint">Please share any comments or suggestions. Do not confidential information.</p>
        <textarea class="govuk-textarea" id="whyScore" name="whyScore" rows="3" aria-describedby="whyScore-hint"></textarea>
      </div>
      <!-- call back -->
      <div class="govuk-form-group">
        <label class="govuk-heading-m" for="feedback">
          4. Do you have any feedback of suggestions
        </label>
        <p class="govuk-hint">Please share any comments or suggestions. Do not confidential information.</p>
        <textarea class="govuk-textarea" id="feedback" name="feedback" rows="3" aria-describedby="feedback-hint"></textarea>
      </div>
      <!-- call back -->
      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset" aria-describedby="feedbackCallBack-hint">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h1 class="govuk-heading-m govuk-!-margin-bottom-0">
              May we contact you in the future?
            </h1>
            <p class="govuk-hint">Can we contact you to take part in future research to help improve funding services like Delta?</p>
            </legend>
          <div class="govuk-checkboxes" data-module="govuk-checkboxes">
            <div class="govuk-checkboxes__item">
              <input class="govuk-checkboxes__input" id="feedbackCallBack" name="feedbackCallBack" type="checkbox" value="feedbackCallBack">
              <label class="govuk-label govuk-checkboxes__label" for="feedbackCallBack">
                Yes
              </label>
              </div>
            </div>
        </fieldset>
      </div>

      <p>Weâ€™ll store your information securely. You can ask us to stop contacting you at any time. For more information, read our privacy notice.</p>

      <button class="govuk-button">Submit feedback</button>
      <button class="govuk-button govuk-button--secondary">Cancel</button>
    </div>
  </div>
</div>
<!-- report -->


<div class="panel">
  <h1 class="govuk-heading-xl"><small class="delta-text-secondary govuk-!-font-size-27">MI Report</small><br>
      User feedback</h1>
      <!-- QUICK FILTERS START -->
      <form>
        <div class="govuk-grid-row">
          <div class="govuk-grid-column-one-third">
            <!-- Channels start -->
            <div class="govuk-form-group">
              <fieldset class="govuk-fieldset">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                  <h1 class="govuk-fieldset__heading">
                    Channels
                  </h1>
                </legend>
                <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                  <div class="govuk-checkboxes__item">
                    <input class="govuk-checkboxes__input" id="channel-1" name="channel" type="checkbox" value="channel-1" checked>
                    <label class="govuk-label govuk-checkboxes__label" for="channel-1">
                      Statistics
                    </label>
                  </div>
                  <div class="govuk-checkboxes__item">
                    <input class="govuk-checkboxes__input" id="channel-2" name="channel" type="checkbox" value="channel-2" checked>
                    <label class="govuk-label govuk-checkboxes__label" for="channel-2">
                      Grants
                    </label>
                  </div>
                  <div class="govuk-checkboxes__item">
                    <input class="govuk-checkboxes__input" id="channel-3" name="channel" type="checkbox" value="channel-3" checked>
                    <label class="govuk-label govuk-checkboxes__label" for="channel-3">
                      Funding Service
                    </label>
                  </div>
                </div>
              </fieldset>
            </div>
            <!-- Channels end -->
          </div>
          <div class="govuk-grid-column-one-third">
            <!-- Collection status start -->
            <div class="govuk-form-group">
              <fieldset class="govuk-fieldset">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                  <h1 class="govuk-fieldset__heading">
                    User type
                  </h1>
                </legend>
                <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
                  <div class="govuk-checkboxes__item">
                    <input class="govuk-checkboxes__input" id="collection-status-1" name="collection-status" type="checkbox" value="collection-status-1">
                    <label class="govuk-label govuk-checkboxes__label" for="collection-status-1">
                      Internal
                    </label>
                  </div>
                  <div class="govuk-checkboxes__item">
                    <input class="govuk-checkboxes__input" id="collection-status-2" name="collection-status" type="checkbox" value="collection-status-2" checked>
                    <label class="govuk-label govuk-checkboxes__label" for="collection-status-2">
                      External
                    </label>
                  </div>
                </div>
              </fieldset>
            </div>
            <!-- Collection status end -->
          </div>
          <div class="govuk-grid-column-one-third">
            <!-- Collection status start -->
            <div class="govuk-form-group">
              <label class="govuk-heading-m" for="range">
                Date range
              </label>
              <select class="govuk-select" id="range" name="range">
                <option value="xxx" selected="selected">This quarter (to today)</option>
                <option value="xxx">Last quarter</option>
                <option value="xxx">Year to date</option>
                <option value="xxx">Last year</option>
              </select>
            </div>
            <!-- Collection status end -->
          </div>
        </div>
      </form>
      <!-- QUICK FILTERS END -->
      <div class="delta-summary-blocks">
      <!-- BLOCK START -->
      <div class="govuk-summary-card">
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">Responses <small>(External vs Internal)</small></h2>
        </div>
        <div class="govuk-summary-card__content">
          <p class="delta-summary-block--value">100 <small class="delta-text-secondary">(90 / 10)</small></p>
        </div>
      </div>
      <!-- BLOCK END -->
      <!-- BLOCK START -->
      <div class="govuk-summary-card">
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">Easy of use</h2>
        </div>
        <div class="govuk-summary-card__content">

          <!-- Ease of use chart here ======== -->
          <div style="display: block; width: 300px;">
            <canvas id="chartEaseOfUse"></canvas>
          </div>
          
          <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

          <!-- Colour values taken from: https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/ -->
          
          <script>
            const ctxEase = document.getElementById('chartEaseOfUse');
          
            new Chart(ctxEase, {
                type: 'pie',
                data: {
                    labels: ['Very easy', 'Easy', 'Neither easy nor difficult', 'Difficult', 'Very difficult'],
                    datasets: [{
                        data: [60, 20, 10, 5, 5],
                        backgroundColor: ['#85994b', '#00703c', '#5694ca', '#f47738', '#d4351c'],
                        borderWidth: 0
                    }]
                },
                options: {
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom'
                        },
                        tooltip: {
                            enabled: true
                        }
                    },
                    responsive: true,
                    maintainAspectRatio: false
                }
            });      

          </script>


        </div>
      </div>
      <!-- BLOCK END -->
      <!-- BLOCK START -->
      <div class="govuk-summary-card">
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">Easier or harder?</h2>
        </div>
        <div class="govuk-summary-card__content">
          
         <!-- change chart here ======== -->
          <div style="display: block; width: 300px;">
            <canvas id="chartChange"></canvas>
          </div>
          
          <!-- Colour values taken from: https://analysisfunction.civilservice.gov.uk/policy-store/data-visualisation-colours-in-charts/ -->
          
          <script>
            const ctxChange = document.getElementById('chartChange');
          
            new Chart(ctxChange, {
                type: 'pie',
                data: {
                    labels: ['Easier', 'No change', 'Harder'],
                    datasets: [{
                        data: [60, 20, 5],
                        backgroundColor: ['#85994b', '#5694ca', '#d4351c'],
                        borderWidth: 0
                    }]
                },
                options: {
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom'
                        },
                        tooltip: {
                            enabled: true
                        }
                    },
                    responsive: true,
                    maintainAspectRatio: false
                }
            });      

          </script> 


        </div>
      </div>
      <!-- BLOCK END -->
    </div><!-- close delta-summary-blocks -->
    <!-- Responses -->
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-one-third">
        <h4 class="govuk-heading-l">Susie Smith<br>
          <small class="delta-text-secondary">Rivendell Borough Council</small class="delta-text-secondary"></h4>
        <ul class="govuk-list">
          <li><strong>Date</strong>: Monday, 10 March 2025, 12:54</li>
          <li><strong>User type</strong>: Internal user</li>
        </ul>
      </div>
      <div class="govuk-grid-column-two-thirds">
        <ul class="govuk-list">
          <li><strong>Easy of use:</strong> Easy</li>
          <li><strong>Easier or harder?</strong> Easier</li>
          <li><strong>Feedback:</strong> Lorem ipsum dolor sit amet consectetur adipisicing elit. Nostrum odio nobis iusto! Maiores doloremque adipisci rem dolor numquam, temporibus alias! Tempora aut nostrum odit voluptates nam! Neque, ipsum sint! Labore?</li>
          <li><strong>Call back request:</strong> Yes</li>
        </ul>
      </div>
    </div>
    <hr>
</div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Hide header and footer in prootyping kit
      var header = document.querySelector('.govuk-header');
      var footer = document.querySelector('.govuk-footer');
      if (footer) {
          footer.style.display = 'none';
      }
      if (header) {
          header.style.display = 'none';
      }
      // Panel stuff =================================================================================================================
      const panels = document.querySelectorAll('.panel');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const startBtn = document.getElementById('startBtn');
      let currentPanel = -1; // Before start button is clicked, no panel is active
      // Function to update the button states
      function updateButtons() {
        startBtn.disabled = currentPanel <= 0;
        prevBtn.disabled = currentPanel <= 0;
        nextBtn.disabled = currentPanel === panels.length - 1;
      }
      // Function to scroll to a specific panel
      function scrollToPanel(index) {
        if (index >= 0 && index < panels.length) {
          currentPanel = index;
          panels[currentPanel].scrollIntoView({ behavior: 'smooth' });
          updateButtons();
        }
      }
      // Event listener for the Start button
      startBtn.addEventListener('click', function () {
        scrollToPanel(0);  // Scroll to the first panel
      });
      // Event listeners for the Next and Previous buttons
      prevBtn.addEventListener('click', function () {
        scrollToPanel(currentPanel - 1);
      });
      nextBtn.addEventListener('click', function () {
        scrollToPanel(currentPanel + 1);
      });
      // Initial check to ensure buttons are in the right state
      updateButtons();
    });
  </script>
{% endblock %}
